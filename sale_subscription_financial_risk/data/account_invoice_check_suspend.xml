<?xml version="1.0" ?>
<odoo>
    <data noupdate="1">
        <record id="check_account_service_suspensions" model="base.automation">
            <field name="name">Suspended Services Check - On Payment</field>
            <field name="model_id" ref="model_account_invoice"/>
            <field name="trigger">on_write</field>
            <field name="active" eval="True"/>
            <field name="state">code</field>
            <field name="code">
record = model.browse(env.context['active_id'])
if record.run_suspension_check == True:
    records = env['sale.subscription'].search([
        ('partner_id', '=', record.partner_id.id)
    ])
    for record_id in records:
        record_id.check_service_suspensions()
    <!-- need to write bool back to False -->
            </field>
        </record>
    </data>
</odoo>
